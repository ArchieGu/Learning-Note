## 面向对象特性详解

### 封装 (Encapsulation)

**定义：**信息隐藏或数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类提供的方法（函数）来访问内部信息或数据。

对于封装特性，需要编程语言本身提供一定的语法机制来支持，该机制为**访问权限控制**。

#### 意义

如果不对类中属性的访问做限制，即任何代码都可访问、修改类中的属性，这样虽然更加灵活，但会导致代码**不可控**，属性的修改逻辑会散落在代码的各个角落，影响代码可读性、可维护性。

类仅仅通过有限的方法暴露必要的操作，可提高代码易用性，调用者不需要了解太多背后的业务细节。

### 抽象 (Abstraction)

抽象是隐藏方法的具体实现，使调用者只需要关心方法提供了哪些功能，而不需要知道这些功能是如何实现的。在面向对象编程中，编程语言会提供接口类或抽象类两种语法机制，来实现抽象特性。【类的方法是通过编程语言中“函数”这一语法机制实现的，通过函数包装具体的实现逻辑，本身就已经是一种抽象了】

### 继承 (Inheritance)

继承表示类之间的is-a关系，可分为单继承和多继承，为实现继承特性，编程语言需要提供特殊语法机制进行支持。

`为什么有些语言不支持多继承？`

多重继承的副作用：钻石问题 (菱形继承)

#### 意义

继承最大的好处就是**代码复用**。但过度使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。

### 多态 (Polymorphism)

多态指子类可以替换父类，在实际代码运行过程中，调用子类的方法实现。多态也需要编程语言提供特殊语法机制实现。

1. 支持父类对象可以引用子类对象
2. 支持继承
3. 支持子类可以重写父类中的方法

多态实现方式：

1. 动态语言如Python可通过duck typing 实现多态
2. 继承 + 方法重写
3. 利用接口类语法（C++不支持）

#### 意义

多态特性能够提高代码的**可扩展性**和**复用性**。

## 面向过程与面向对象

面向过程与面向对象最基本的区别是，代码组织方式的不同。面向过程风格的代码被组织成了一组方法集合及其数据结构，方法和数据结构的定义是分开的。面向对象风格的代码被组织成一组类，方法和数据结构被绑定在一起，都定义在类中。

**OOP更加能够应对大规模复杂程序的开发** 

对于简单程序，只要需求足够简单，面向过程风格更具优势，程序处理流程只有一条主线，很容易被划分为顺序执行的步骤。但大规模复杂程序，程序处理流程错综复杂，是一个网状结构，很难拆解为一组顺序执行的方法。

面向对象编程，先给业务建模，将需求翻译成各个类，之后再给类之间建立交互甚，完成这些工作不需要考虑错综复杂的处理流程。有了类设计后，再像搭积木一样，按照处理流程，将类组装起来形成整个程序。

**OOP风格代码更易复用、扩展和维护**

OOP的四大特性

**OOP语言更加人性化、高级、智能**

### 不推荐操作

**1.滥用get set方法** 破坏了封装特性，当多个相关的变量都提供了get set方法后，外部代码很容易进行修改，造成数据不一致。

> 在设计实现类的时候，除非真的需要，否则，尽量不要给属性定义set方法，要防范数据被修改的危险。

**2.滥用全局变量和全局方法** 常见的全局变量有单例类对象、静态成员变量、常量等，常见的全局方法有静态方法。单例类对象在全局代码中只有一份，所以相当于一个全局变量。静态成员变量归属于类上的数据，被所有的实例化对象共享，也相当于一定程度上的全局变量。静态方法一般用来操作静态变量或者外部数据，常用的各种Utils类，里面的方法一般都定义成静态方法，可以在不创建对象的情况下，直接拿来使用。

> 静态方法将方法与数据分类，破坏了封装性，是典型的面向过程风格。

在全局变量和全局方法中，Constants类和Utils类最常用。

定义一个大而全的类并不好，以特别大的Constants类举例：

1. 影响可维护性，类变得越发庞大，查找修改会变得费时，还会增加提交代码冲突的概率
2. 增加代码编译时间，依赖该类的代码很多，每次修改Constants类都会导致依赖它的类文件重新编译
3. 影响代码复用性，在使用依赖类的时候需要将Constants类一并引入，导致引入许多无关的常量到项目中去。

解决方案：

1. 将Constants类拆解为功能更加单一的多个类
2. 不单独定义Constants类，而是在某个类使用到常量时直接定义到这个类里去

在使用Utils类之前，思考是否有必要单独定义一个Utils类，是否可以将类中的某些方法直接定义在其他类中，如果确实必要，那就还是使用Utils类。设计时细化些，针对不同功能，设计不同Utils类。

**3.定义数据和方法分离的类** 

传统MVC结构分为Model层、Controller层、View层，在做前后端分离后，三层结构变为Controller层、Service层、Repository层。Controller层负责暴露接口给前端调用，Service层负责核心业务逻辑，Repository层负责数据读写。而在每一层中，我们又会定义相应的 VO（View Object）、BO(Business Object)、Entity。一般情况下，VO、BO、Entity 中只会定义数据，不会定义方法，所有操作这些数据的业务逻辑都定义在对应的 Controller 类、Service 类、Repository 类中。这就是典型的面向过程的编程风格。

> 这种开发模式成为基于贫血模式的开发模式，是非常常用的Web项目开发模式