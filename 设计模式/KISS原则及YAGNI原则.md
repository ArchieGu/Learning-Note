# KISS, YAGNI, DRY, LOD

## KISS原则

Keep it Simple and Straightforward. 尽量保持简单，是用于维护代码可读和可维护性的重要手段。

1. 不要使用同事可能不懂的技术来实现代码，或者编程语言中过于高级的语法等
2. 不要重复造轮子，要善于使用已有的工具类库
3. 不要过度优化，牺牲代码可读性
4. 如果code review中同事对代码有很多疑问，则有可能是代码不够简单

## YAGNI 原则

You Ain't Gonna Need It 你用不着它。不要去设计当前用不到的功能，也就是不要做过度设计。【代码扩展性还是要考虑的，留好预留的扩展点，等到需要的时候再去加上这些新功能的代码。】不要再项目中提前引入不需要依赖的开发包。

## DRY 原则

Don't Repeat Yourself, 不要写重复的代码。三种典型的代码重复：实现逻辑重复、功能语义重复和代码执行重复

### 实现逻辑重复

如果代码的实现逻辑是相同的，但是语义不同（即用来做不同的事情），那么并不违反DRY原则。对于此类包含重复代码的问题，可以通过抽象成更细粒度的函数方式来解决。

### 功能语义重复

尽管实现逻辑没有重复，但语义重复（功能重复），则违背了DRY原则。如果一个项目中存在多个代码干同一件事，会让其他同事阅读代码产生困惑。如果功能逻辑发生了改变，还需要修改多个地方，十分麻烦。

### 代码执行重复

### 代码复用性

代码复用：在开发新功能时，尽量复用已经存在的代码【从代码使用者角度来看】；代码复用性：代码可被复用的特性或能力【从代码开发者角度来看】。

#### 如何提高代码复用性

1. 减少代码耦合
2. 满足单一职责原则：细粒度的代码，通用性好，容易被复用
3. 模块化：将功能独立的代码，封装成模块
4. 业务与非业务逻辑分离：与业务无关的代码容易复用，因此将非业务逻辑代码分离出来，抽取成一些通用的框架、类库、组件等
5. 通用代码下沉：越底层的代码越通用、会被越多的模块调用，越应该设计的可复用。在代码分层后，为避免交叉调用导致调用关系混乱，只能允许上层代码调用下层代码及同层代码之间的调用，杜绝下层代码调用上层代码。因此通用的代码应尽量下沉到更下层。
6. 继承、多态、抽象、封装：隐藏可变的细节、暴露不变的接口
7. 应用模板等设计模式

## LOD 原则

The Least Knowledge Principle (LOD) 迪米特原则。Each unit should have only limited knowledge about other units: only units "closely" related to the current unit. Each unit should only talk to its friends; Don't talk to strangers.

> 不该有直接依赖关系的类的之间，不要有依赖；有依赖关系的类之间，尽量只依赖必要的接口（“有限知识”）。

该原则帮助实现代码的“高内聚、低耦合”。“高内聚”用来指导类本身的设计，“松耦合”用来指导类与类之间的依赖关系的设计。

“高内聚”：相近的功能应该放到同一个类中，不相近的功能不要放在一个类中。

“松耦合”：类与类之间的依赖关系简单清晰。即便两个类有依赖关系，一个类的代码改动不会或者很少导致依赖类的代码改动。

